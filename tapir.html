<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

    <title>.................</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<style>
  body {
    font-family: sans-serif;
    background: #f9f9f9;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px;
  }

  h1 { margin-bottom: 30px; }

  .contenedor-imagenes, .contenedor-huecos {
    display: flex;
    gap: 15px;
    margin-bottom: 30px;
  }

  .imagen-draggable {
    width: 100px;
    height: 100px;
    cursor: grab;
    border: 2px solid #ccc;
    border-radius: 8px;
    object-fit: cover;
  }

  .hueco {
    width: 100px;
    height: 100px;
    border: 2px dashed #999;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #fff;
  }

  .hueco.over {
    border-color: #007bff;
    background: #e0f0ff;
  }
  .confeti {
        position: fixed;
        width: 10px;
        height: 10px;
        background: red;
        top: 0;
        left: 50%;
        opacity: 0.8;
        transform: translateX(-50%);
        animation: caer 3s linear forwards;
        }
        @keyframes caer {
        to {
            transform: translateY(100vh) rotate(720deg);
            opacity: 0;
        }
        }
</style>
</head>
<body>
  <h2 style="font-family: 'Courier New', monospace;">Encuentra la combinación correcta de imagenes.</h2>
  
   <p class = "text-break text-center fs-4"style="font-family: 'Courier New', monospace; ">
            Las indicaciones son las siguientes:
  <div style="width: 450px;" >
    </p>
     <p class = "text-break fst-italic" style="font-family: 'Courier New', monospace;"">
            Se dice que existe una macaca que siempre quiere ir acompañada.
    </p>
     <p class = "text-break fst-italic" style="font-family: 'Courier New', monospace;"">
            El mandrós cansat es considera d'extrema esquerra.
    </p>
     <p class = "text-break fst-italic" style="font-family: 'Courier New', monospace;"">
            That mythological animal that you couldn't see, prefers at least one space between everything.
    </p>
     <p class = "text-break fst-italic" style="font-family: 'Courier New', monospace;"">
            Le tapir veut voir le bord de loin, à deux espaces de distance.
    </p>

  </div>

  <div class="contenedor-imagenes">
    <img src="xingxing.jpg" draggable="true" id="xingxing" class="imagen-draggable">
    <img src="cansat.png" draggable="true" id="cansat" class="imagen-draggable">
    <img src="tapir.jpg" draggable="true" id="tapir" class="imagen-draggable">
  </div>

  <div class="contenedor-huecos">
    <div class="hueco" data-id="cansat"></div>
    <div class="hueco" data-id="xingxing"></div>
    <div class="hueco" data-id="img3"></div>
    <div class="hueco" data-id="tapir"></div>
    <div class="hueco" data-id="img5"></div>
    <div class="hueco" data-id="img6"></div>
  </div>

  <h1 id="codigo" style="font-family: 'Courier New', monospace;"></h1>

 <button id="botonFlotante" class="btn btn-outline-dark btn-lg position-fixed bottom-0 end-0 m-4 shadow" 
    data-bs-toggle="modal" data-bs-target="#miModal">
      pista...
    </button>

 <!-- Modal -->
    <div class="modal fade" id="miModal" tabindex="-1" aria-labelledby="miModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title fw-bold" id="miModalLabel">Pista 🤫</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            <p>
                Xingxing va pegada al perezoso. El perezoso se queda en la parte izquierda del todo. El tapir deberías ser capaz de ubicarlo.
            </p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn outline-dark" data-bs-dismiss="modal">Cerrar</button>
          </div>
        </div>
      </div>
    </div>



<script>
const imagenes = document.querySelectorAll('.imagen-draggable');
const huecos = document.querySelectorAll('.hueco');
let draggedItem = null;

// Array de IDs válidos
const idsValidos = ["xingxing", "cansat", "tapir"];

// Estado de si cada imagen válida está en su hueco correcto
let estado = {
  xingxing: false,
  cansat: false,
  tapir: false
};

imagenes.forEach(img => {
  img.addEventListener('dragstart', dragStart);
});

huecos.forEach(hueco => {
  hueco.addEventListener('dragover', dragOver);
  hueco.addEventListener('dragenter', dragEnter);
  hueco.addEventListener('dragleave', dragLeave);
  hueco.addEventListener('drop', drop);
});

function dragStart(e) {
  draggedItem = e.target;
}

function dragOver(e) {
  e.preventDefault();
}

function dragEnter(e) {
  e.preventDefault();
  e.target.classList.add('over');
}

function dragLeave(e) {
  e.target.classList.remove('over');
}

function drop(e) {
  e.preventDefault();
  e.target.classList.remove('over');

  if (!draggedItem) return;

  // Coloca la imagen en el hueco sin restricción
  e.target.appendChild(draggedItem);

  // Actualizamos el estado solo si es una de las imágenes válidas
  if (idsValidos.includes(draggedItem.id)) {
    if (draggedItem.id === e.target.dataset.id) {
      estado[draggedItem.id] = true; // correcto
    } else {
      estado[draggedItem.id] = false; // incorrecto
    }
  }

  // Verificamos si todas las imágenes válidas están correctas
  const victoria = Object.values(estado).every(v => v === true);
  if (victoria) {
    document.getElementById("codigo").textContent = "El número de la combinación es 9";

    lanzarConfeti(); // opcional
  }

function lanzarConfeti() {
      for (let i = 0; i < 50; i++) {
        const confeti = document.createElement("div");
        confeti.classList.add("confeti");

        // colores random
        confeti.style.backgroundColor = 
          `hsl(${Math.random() * 360}, 100%, 50%)`;

        // posición horizontal random
        confeti.style.left = Math.random() * 100 + "vw";

        // tamaño random
        confeti.style.width = confeti.style.height = 
          Math.random() * 8 + 4 + "px";

        // duración random
        confeti.style.animationDuration = (Math.random() * 3 + 2) + "s";

        document.body.appendChild(confeti);

        // eliminar después de la animación
        setTimeout(() => {
          confeti.remove();
        }, 5000);
      }
    }

}
</script>
</body>
</html>